### FROM image:tag
- mecburi tek talimattir. Digerleri opsiyoneldir.
- image'in hangi imajtan olusacagini belirler.
- FROM ubuntu:18.04

### RUN komut
- komut calistirma shellde
- RUN apt-get update

### WORKDIR folder
- istenilen klasore gecmemizi saglar.
- belirtilen klasor yoksa olusturulur.

### COPY kaynak hedef
- kaynak ve hedef klsordur.
- icindekiler kopyalanir. kaynak klasoru degil icindekiler kopyalanir. Dosya ve klasor
- COPY /source /user/app
- hedef yoksa olusturulur.

### EXPOSE port
- containera portlardan ulasabilmek icin kullanilir.
- container olusturulurken de portun publish edilmesi gerekir.
- EXPOSE 80/tcp

### CMD command
- Image'dan container yaratilacagi zaman varsayilan olarak calistirmasini istedigimiz komutu yazariz.
- container calistirilirken baska komut belirtilmediyse bu komut calisir.

### HEALTHCHECK komut
- Bir processín duzgun calisip calismadigi kontrol edilir
- HEALTHCHECK --interval=5m --timeout=3s CMD curl -f http://localhost/ || exit 1
- HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 CMD curl -f http://localhost/ || exit 1

### docker image build -t erdogansahin/merhaba -f Dockerfile .
- . copy gibi islemler icin sadece buraya bak demek. Baska bir yer olsaydi oraya bak derdik.
- -f Dockerfile kismina aslinda gerek yok ama Dockerfile yerine baska bir isimde dosyadan bakmasini isteseydik yazmamiz gerekirdi. Komutun calistirildigi klasore bakar once.
- image olusturur.
- RUN, WORKDIR komutlarinda gecici containerlar acilir. Onceki layerlari birlestirerek yapar bunu. Linux komutu icerdigi icin acilir bu containerlar.
- Her bir Docker komutu icin en az bir layer olusturur. 

### docker image history erdogansahin/merhaba
- tum layerlari komutlarla beraber gosterir. Base image layerlari da gelir.

IMAGE          CREATED         CREATED BY                                      SIZE      COMMENT
23b3a3b756dc   5 minutes ago   CMD ["java" "merhaba"]                          0B        buildkit.dockerfile.v0
<missing>      5 minutes ago   COPY /myapp . # buildkit                        648B      buildkit.dockerfile.v0
<missing>      5 minutes ago   WORKDIR /merhaba                                0B        buildkit.dockerfile.v0
<missing>      5 minutes ago   RUN /bin/sh -c apt-get install default-jre -…   378MB     buildkit.dockerfile.v0
<missing>      8 minutes ago   RUN /bin/sh -c apt-get update -y # buildkit     45.5MB    buildkit.dockerfile.v0
<missing>      2 weeks ago     /bin/sh -c #(nop)  CMD ["/bin/bash"]            0B
<missing>      2 weeks ago     /bin/sh -c #(nop) ADD file:3c74e7e08cbf9a876…   63.2MB
<missing>      2 weeks ago     /bin/sh -c #(nop)  LABEL org.opencontainers.…   0B
<missing>      2 weeks ago     /bin/sh -c #(nop)  LABEL org.opencontainers.…   0B
<missing>      2 weeks ago     /bin/sh -c #(nop)  ARG LAUNCHPAD_BUILD_ARCH     0B
<missing>      2 weeks ago     /bin/sh -c #(nop)  ARG RELEASE                  0B


### Dosyalarda degisiklik oldugunda olan durumlar
- Dockerfile olusturulurken degistirilen kisimdan sonrasi cachelenmez. Bu nokta onemli
- Degismesi muhtemel Dockerfile'in alt kisminda yazilir.

### Double Ampersand(&&), Double Pipe(||), Semicolon(;)
- Ampersand komutun arka planda calismasini saglar. Terminali bize birakir.
- Pipe, soldaki ciktinin cikisini sagdaki komuta girdi olarak verir.
cat abc.txt | grep 3
- Noktali virgul tek satirda birden fazla komut girebilmemizi saglar. Sirayla yapar.
ls;date;cat abc.txt
- Sartli durumlar icin Double Ampersand(&&), Double Pipe(||) kullanilir.

### komut1 && komut2
- ve anlamindadir. Birden fazla komutu birlestirir.
- komut1 calisirsa komut2 calistirilir. Yani hata yoksa
- komut2 hata verirse komut2 calsitirilmaz.

### komut1 || komut2
- komut1 hata vermezse komut2 calismaz
- komut1 hata verirse komut2 calisir.

### Backslash karakteri
- Alt satira gec komut yazmaya devam et demek. Kod bozulmaz. Linux ile ilgili birsey.

### ENV KULLANICI="Dunyali"
- Dockerfile'da tanimlanan yukaridaki gibi bir env variable docker run edilirken yeni env variable yazarak update edebiliriz.
- docker container run -d -e KULLANICI="Erdogan"

### EXPOSE 80
- baz alinan image'lardaki ozellikler override etmezsek gelir. Ornegin Nginx 80 portuna export eder.
- Bunu inspect komutu ile gormek mumkun
- inpect ile exposed edilmis portlari, env variables'lari gormek mumkun.

### ADD & COPY Farki
- ADD copy talimati ile ayni seyi yapar.
- uzak bir lokasyondan da kopyalama yapabiliriz.
- tar gibi sikistirilmis bir dosya kaynak olarak verilirse onu acarak kaynaga kopyalar
- ADD https://wordpress.org/latest.tar.gz /temp

### ENTRYPOINT & CMD Farki
- CMD de runtime yani container calsitirildiginda farkli bir komutla calistirabilirim Dockerfile'da belirtilen CMD'nin yerine
- ENTRYPOINT CMD ile ayni seyi yapiyor. Ama runtime'ta calisacak komutu degistimek mumkun degil. hata vermez ama yine de calisir.
- Dockerfile'da ya CMD ve ENTRYPOINT olmalidir.
- Her ikisi de bir Dockerfile'da yer alabilir.
- CMD talimatinda yazilanlari parametre olarak ekler. Enteresante. Runtime'da bu CMD'de yazilan parametreyi degistirmek mumkun

FROM centos:latest
ENTRYPOINT ["ping"]
# bu kisim parametre entrypoint icin
CMD ["127.0.0.1"]

docker run deneme 8.8.8.8
